<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>bitstream.io</title><link href="/" rel="alternate"></link><link href="/feeds/ops.atom.xml" rel="self"></link><id>/</id><updated>2014-08-13T00:00:00-07:00</updated><entry><title>Creating a Trivial, Signed APT Repository</title><link href="/creating-a-trivial-signed-apt-repository.html" rel="alternate"></link><updated>2014-08-13T00:00:00-07:00</updated><author><name>raj</name></author><id>tag:,2014-08-13:creating-a-trivial-signed-apt-repository.html</id><summary type="html">&lt;p&gt;Setting up an APT repository is a reasonable way to distribute &lt;code&gt;.deb&lt;/code&gt;
packages to end users. You will want to create a signed repository, so
that users can perform automated updates of your software (e.g. using
&lt;code&gt;apt-get install -y&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;There are &lt;a href="https://wiki.debian.org/HowToSetupADebianRepository#APT_Archive_Types"&gt;two kinds of repositories&lt;/a&gt;,
"official" and "trivial". Trivial repositories are easier to set up than
the official variety, but setup of &lt;em&gt;signed&lt;/em&gt; trivial repositories is not
well-documented. Here are instructions on how to set up your own repo:&lt;/p&gt;
&lt;p&gt;Prerequisites:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A &lt;code&gt;.deb&lt;/code&gt; file, unsigned&lt;/li&gt;
&lt;li&gt;A machine with &lt;code&gt;gpg&lt;/code&gt; installed&lt;/li&gt;
&lt;li&gt;RSA gpg keys created using &lt;code&gt;gpg --gen-key&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The repository is a simply a directory hierarchy. It can be local (e.g. on a usb stick) or
published to a web server. Here is what it should look like when we are done:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;aptrepo&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;binary&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Packages&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
        &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;foo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;deb&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Release&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;Release&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Start by creating the hierarchy above with empty directories. Place &lt;code&gt;foo.deb&lt;/code&gt; in the
&lt;code&gt;binary&lt;/code&gt; directory, and then follow these instructions to create the signed files:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#sign the .deb file&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt; ~/aptrepo/binary
dpkg-sig --sign builder foo.deb

&lt;span class="c"&gt;#create the Packages.gz file&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt; ~/aptrepo
apt-ftparchive packages binary | gzip -9c &amp;gt; binary/Packages.gz

&lt;span class="c"&gt;#create the Release file&lt;/span&gt;
&lt;span class="nb"&gt;cd&lt;/span&gt; ~/aptrepo
apt-ftparchive release . &amp;gt; Release

&lt;span class="c"&gt;#create a detached ascii signature of the Release file&lt;/span&gt;
gpg --armor --sign --detach-sign Release.gpg Release
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now you can upload the &lt;code&gt;aptrepo&lt;/code&gt; directory to a webserver. If the repo
path is &lt;code&gt;http://example.com/foo/aptrepo&lt;/code&gt;, then end users will have to
add this line to their  &lt;code&gt;/etc/apt/sources.list&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;deb http://example.com/foo/aptrepo binary/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Note that the &lt;code&gt;add-apt-repository&lt;/code&gt; tool makes it easy for end users to
add repos to &lt;code&gt;sources.list&lt;/code&gt;, but older versions of this tool contain a
bug (&lt;a href="https://bugs.launchpad.net/ubuntu/+source/software-properties/+bug/987264"&gt;now fixed&lt;/a&gt;)
that adds a &lt;code&gt;deb-src&lt;/code&gt; line in addition to the &lt;code&gt;deb&lt;/code&gt; line, which will
cause &lt;code&gt;apt-get update&lt;/code&gt; to fail.&lt;/p&gt;
&lt;p&gt;You now need to distribute your public key to end users, who will need to add it to their
apt keychain. To export the public key to a text file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;gpg --armor --export foo@example.com --output foo-public-key
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Then upload &lt;code&gt;foo-public-key&lt;/code&gt; to a webserver. End users can install the key like so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;curl http://example.com/foo-public-key | sudo apt-key add -
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once the key has been added, end users can install your software using &lt;code&gt;apt&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;sudo apt-get update
sudo apt-get install foo
&lt;/pre&gt;&lt;/div&gt;</summary><category term="apt"></category><category term="debian"></category><category term="ubuntu"></category></entry><entry><title>OS X and Ubuntu Codenames</title><link href="/os-x-and-ubuntu-codenames.html" rel="alternate"></link><updated>2014-08-13T00:00:00-07:00</updated><author><name>raj</name></author><id>tag:,2014-08-13:os-x-and-ubuntu-codenames.html</id><summary type="html">&lt;p&gt;&lt;link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"&gt;
&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"&gt;&lt;/script&gt;
&lt;script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"&gt;&lt;/script&gt;
&lt;style type="text/css"&gt;
    tbody td {border: 0; font-size: 75%;}
&lt;/style&gt;&lt;/p&gt;
&lt;div class="row"&gt;
&lt;div class="col-md-6"&gt;
    Ubuntu
    &lt;table class="table-striped"&gt;
    &lt;tbody&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 4.10&lt;/td&gt;&lt;td&gt;Warty Warthog&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 5.04&lt;/td&gt;&lt;td&gt;Hoary Hedgehog&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 5.10&lt;/td&gt;&lt;td&gt;Breezy Badger&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 6.06 LTS&lt;/td&gt;&lt;td&gt;Dapper Drake&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 6.10&lt;/td&gt;&lt;td&gt;Edgy Eft&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 7.04&lt;/td&gt;&lt;td&gt;Feisty Fawn&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 7.10&lt;/td&gt;&lt;td&gt;Gutsy Gibbon&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 8.04 LTS&lt;/td&gt;&lt;td&gt;Hardy Heron&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 8.10&lt;/td&gt;&lt;td&gt;Intrepid Ibex&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 9.04&lt;/td&gt;&lt;td&gt;Jaunty Jackalope&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 9.10&lt;/td&gt;&lt;td&gt;Karmic Koala&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 10.04 LTS&lt;/td&gt;&lt;td&gt;Lucid Lynx&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 10.10&lt;/td&gt;&lt;td&gt;Maverick Meerkat&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 11.04&lt;/td&gt;&lt;td&gt;Natty Narwhal&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 11.10&lt;/td&gt;&lt;td&gt;Oneiric Ocelot&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 12.04 LTS&lt;/td&gt;&lt;td&gt;Precise Pangolin&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 12.10&lt;/td&gt;&lt;td&gt;Quantal Quetzal&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 13.04&lt;/td&gt;&lt;td&gt;Raring Ringtail&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 13.10&lt;/td&gt;&lt;td&gt;Saucy Salamander&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 14.04 LTS&lt;/td&gt;&lt;td&gt;Trusty Tahr&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;Ubuntu 14.10&lt;/td&gt;&lt;td&gt;Utopic Unicorn&lt;/td&gt;&lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;/table&gt;
    Ubuntu version numbers are also release dates: Ubuntu 14.04 was released in April 2014.
&lt;/div&gt;
&lt;div class="col-md-6"&gt;
    OSX
    &lt;table class="table-striped"&gt;
    &lt;tbody&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.0&lt;/td&gt;&lt;td&gt;Cheetah&lt;/td&gt;&lt;td&gt;March 24, 2001&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.1&lt;/td&gt;&lt;td&gt;Puma&lt;/td&gt;&lt;td&gt;September 25, 2001&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.2&lt;/td&gt;&lt;td&gt;Jaguar&lt;/td&gt;&lt;td&gt;August 24, 2002&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.3&lt;/td&gt;&lt;td&gt;Panther&lt;/td&gt;&lt;td&gt;October 24, 2003&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.4&lt;/td&gt;&lt;td&gt;Tiger&lt;/td&gt;&lt;td&gt;April 29, 2005&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.5&lt;/td&gt;&lt;td&gt;Leopard&lt;/td&gt;&lt;td&gt;October 26, 2007&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.6&lt;/td&gt;&lt;td&gt;Snow Leopard&lt;/td&gt;&lt;td&gt;August 28, 2009&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.7&lt;/td&gt;&lt;td&gt;Lion&lt;/td&gt;&lt;td&gt;July 20, 2011&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.8&lt;/td&gt;&lt;td&gt;Mountain Lion&lt;/td&gt;&lt;td&gt;July 25, 2012&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.9&lt;/td&gt;&lt;td&gt;Mavericks&lt;/td&gt;&lt;td&gt;October 22, 2013&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;OS X 10.10&lt;/td&gt;&lt;td&gt;Yosemite&lt;/td&gt;&lt;td&gt;2014&lt;/td&gt;&lt;/tr&gt;
    &lt;/tbody&gt;
    &lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</summary><category term="osx"></category><category term="ubuntu"></category></entry></feed>